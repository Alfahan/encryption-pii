version: "2"
plugins:
  - name: golang
    wasm:
      url: https://downloads.sqlc.dev/plugin/sqlc-gen-go_1.3.0.wasm
      sha256: e8206081686f95b461daf91a307e108a761526c6768d6f3eca9781b0726b7ec8
sql:
  - engine: "postgresql"
    queries: "postgres/query.sql"
    schema: "postgres/schema.sql"
    codegen:
      - plugin: golang
        out: "postgres/internal/sqlc"
        options:
          package: "sqlc"
          sql_package: "database/sql"
          emit_sql_as_comment: true
          overrides:
            - column: profile.nik
              go_type:
                import: github.com/dyaksa/sqlx-encrypt/postgres/types
                type: AEADString
            - column: profile.name
              go_type:
                import: github.com/dyaksa/sqlx-encrypt/postgres/types
                type: AEADString
            - column: profile.phone
              go_type:
                import: github.com/dyaksa/sqlx-encrypt/postgres/types
                type: AEADString
            - column: profile.email
              go_type:
                import: github.com/dyaksa/sqlx-encrypt/postgres/types
                type: AEADString
            - column: profile.dob
              go_type:
                import: github.com/dyaksa/sqlx-encrypt/postgres/types
                type: AEADTime
            - column: profile.nik_bidx
              go_type:
                import: github.com/dyaksa/sqlx-encrypt/postgres/types
                type: BIDXString
            - column: profile.name_bidx
              go_type:
                import: github.com/dyaksa/sqlx-encrypt/postgres/types
                type: BIDXString
            - column: profile.phone_bidx
              go_type:
                import: github.com/dyaksa/sqlx-encrypt/postgres/types
                type: BIDXString
            - column: profile.email_bidx
              go_type:
                import: github.com/dyaksa/sqlx-encrypt/postgres/types
                type: BIDXString
